{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar tools_1 = require(\"./lib/tools\");\n\nfunction StickyScrollSpyNav(_a) {\n  var header = _a.header,\n      nav = _a.nav,\n      children = _a.children,\n      onClickNav = _a.onClickNav,\n      navContainerStyle = _a.navContainerStyle,\n      navItemStyle = _a.navItemStyle,\n      navActiveItemStyle = _a.navActiveItemStyle,\n      _b = _a.offset,\n      offset = _b === void 0 ? 0 : _b,\n      style = _a.style;\n  var navEl = (0, react_1.useRef)(null);\n\n  var _c = (0, react_1.useState)(0),\n      navHeight = _c[0],\n      setNavHeight = _c[1];\n\n  var _d = (0, react_1.useState)(0),\n      currentIndex = _d[0],\n      setCurrentIndex = _d[1];\n\n  var onScroll = (0, tools_1.throttle)(function () {\n    var _a, _b;\n\n    var scrollElement = document.scrollingElement || document.documentElement;\n    var outerHeight = window.innerHeight;\n    var scrollTop = scrollElement.scrollTop;\n    var scrollHeight = scrollElement.scrollHeight;\n    var firstEl = (_b = (_a = children[0]) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current;\n    var isNotStart = firstEl && firstEl.offsetTop > scrollTop;\n    var isEnd = scrollTop + outerHeight >= scrollHeight;\n\n    if (isNotStart) {\n      setCurrentIndex(0);\n    } else if (isEnd) {\n      setCurrentIndex(children.length - 1);\n    } else {\n      children.forEach(function (el, index) {\n        var _a;\n\n        var target = (_a = el === null || el === void 0 ? void 0 : el.ref) === null || _a === void 0 ? void 0 : _a.current;\n\n        if (target) {\n          var visibleVertical = target.offsetTop >= 0 && scrollElement.scrollTop + navHeight >= target.offsetTop - offset && scrollElement.scrollTop + navHeight < target.offsetTop + target.offsetHeight - offset;\n\n          if (visibleVertical) {\n            setCurrentIndex(index);\n          }\n        }\n      });\n    }\n  });\n\n  var handleClick = function (index) {\n    var _a, _b;\n\n    var offsetTop = ((_b = (_a = children[index]) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current.offsetTop) || 0;\n    window.scrollTo({\n      top: offsetTop - navHeight - offset,\n      behavior: \"smooth\"\n    });\n    onClickNav && onClickNav(index);\n  };\n\n  (0, react_1.useEffect)(function () {\n    var _a;\n\n    setNavHeight(((_a = navEl === null || navEl === void 0 ? void 0 : navEl.current) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0);\n    window.addEventListener(\"scroll\", onScroll);\n    return function () {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [onScroll]);\n  return react_1.default.createElement(\"div\", {\n    style: style\n  }, header ? header : null, react_1.default.createElement(\"nav\", {\n    ref: navEl,\n    style: __assign({\n      position: \"sticky\",\n      top: offset - 1,\n      backgroundColor: \"#fff\"\n    }, navContainerStyle)\n  }, nav.map(function (navName, index) {\n    return react_1.default.createElement(\"button\", {\n      onClick: function () {\n        return handleClick(index);\n      },\n      key: \"\" + navName + index,\n      style: currentIndex === index ? __assign(__assign({}, navItemStyle), navActiveItemStyle) : navItemStyle\n    }, navName);\n  })), children);\n}\n\nexports.default = StickyScrollSpyNav;","map":{"version":3,"sources":["../src/StickyScrollSpyNav.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar tools_1 = require(\"./lib/tools\");\nfunction StickyScrollSpyNav(_a) {\n    var header = _a.header, nav = _a.nav, children = _a.children, onClickNav = _a.onClickNav, navContainerStyle = _a.navContainerStyle, navItemStyle = _a.navItemStyle, navActiveItemStyle = _a.navActiveItemStyle, _b = _a.offset, offset = _b === void 0 ? 0 : _b, style = _a.style;\n    var navEl = (0, react_1.useRef)(null);\n    var _c = (0, react_1.useState)(0), navHeight = _c[0], setNavHeight = _c[1];\n    var _d = (0, react_1.useState)(0), currentIndex = _d[0], setCurrentIndex = _d[1];\n    var onScroll = (0, tools_1.throttle)(function () {\n        var _a, _b;\n        var scrollElement = document.scrollingElement || document.documentElement;\n        var outerHeight = window.innerHeight;\n        var scrollTop = scrollElement.scrollTop;\n        var scrollHeight = scrollElement.scrollHeight;\n        var firstEl = (_b = (_a = children[0]) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current;\n        var isNotStart = firstEl && firstEl.offsetTop > scrollTop;\n        var isEnd = scrollTop + outerHeight >= scrollHeight;\n        if (isNotStart) {\n            setCurrentIndex(0);\n        }\n        else if (isEnd) {\n            setCurrentIndex(children.length - 1);\n        }\n        else {\n            children.forEach(function (el, index) {\n                var _a;\n                var target = (_a = el === null || el === void 0 ? void 0 : el.ref) === null || _a === void 0 ? void 0 : _a.current;\n                if (target) {\n                    var visibleVertical = target.offsetTop >= 0 &&\n                        scrollElement.scrollTop + navHeight >= target.offsetTop - offset &&\n                        scrollElement.scrollTop + navHeight < target.offsetTop + target.offsetHeight - offset;\n                    if (visibleVertical) {\n                        setCurrentIndex(index);\n                    }\n                }\n            });\n        }\n    });\n    var handleClick = function (index) {\n        var _a, _b;\n        var offsetTop = ((_b = (_a = children[index]) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current.offsetTop) || 0;\n        window.scrollTo({ top: offsetTop - navHeight - offset, behavior: \"smooth\" });\n        onClickNav && onClickNav(index);\n    };\n    (0, react_1.useEffect)(function () {\n        var _a;\n        setNavHeight(((_a = navEl === null || navEl === void 0 ? void 0 : navEl.current) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0);\n        window.addEventListener(\"scroll\", onScroll);\n        return function () {\n            window.removeEventListener(\"scroll\", onScroll);\n        };\n    }, [onScroll]);\n    return (react_1.default.createElement(\"div\", { style: style },\n        header ? header : null,\n        react_1.default.createElement(\"nav\", { ref: navEl, style: __assign({ position: \"sticky\", top: offset - 1, backgroundColor: \"#fff\" }, navContainerStyle) }, nav.map(function (navName, index) { return (react_1.default.createElement(\"button\", { onClick: function () { return handleClick(index); }, key: \"\" + navName + index, style: currentIndex === index ? __assign(__assign({}, navItemStyle), navActiveItemStyle) : navItemStyle }, navName)); })),\n        children));\n}\nexports.default = StickyScrollSpyNav;\n//# sourceMappingURL=StickyScrollSpyNav.js.map"]},"metadata":{},"sourceType":"script"}